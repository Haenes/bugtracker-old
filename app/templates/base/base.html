{% load static %}
{% load i18n %}
{% load cache %}

{% get_current_language as LANGUAGE_CODE %}

<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>{% block title %}{% endblock %}</title>

		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
		<link rel="stylesheet" href="{% static 'style.css' %}">

		<link rel="apple-touch-icon" sizes="180x180" href="{% static 'favicon/apple-touch-icon.png' %}">
		<link rel="icon" type="image/png" sizes="32x32" href="{% static 'favicon/favicon-32x32.png' %}">
		<link rel="icon" type="image/png" sizes="16x16" href="{% static 'favicon/favicon-16x16.png' %}">
		<link rel="manifest" href="{% static 'favicon/site.webmanifest' %}">
		<link rel="mask-icon" href="{% static 'favicon/safari-pinned-tab.svg' %}" color="#5bbad5">
		<meta name="apple-mobile-web-app-title" content="BugTracker">
		<meta name="application-name" content="BugTracker">
		<meta name="msapplication-TileColor" content="#ff55aa">
		<meta name="msapplication-TileImage" content="{% static 'favicon/mstile-144x144.png' %}">
		<meta name="theme-color" content="#ffffff">

		<script src="{% static 'color-mode.js' %}"></script>
		{% block script %}{% endblock %}
	</head>

	<body class="d-flex flex-column min-vh-100">

<!-- NAVBAR -->
<!-- LEFT SIDE -->
	{% block navbar %}
		<nav class="navbar navbar-expand-lg bg-body-tertiary border-bottom">
			<div class="container-fluid">

				<a class="navbar-brand" href="{% url 'projects' %}">BugTracker</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText"
					aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>

<!-- TRIGER ISSUE MODAL-->
				<div class="collapse navbar-collapse mb-0" id="navbarText">
					<ul class="navbar-nav me-auto">
						{% block issue_modal %}{% endblock %}
					</ul>

<!-- RIGTH SIDE -->
				<form action="{% url 'search' %}" class="col-5 col-lg-3 me-3  mb-2 mb-lg-0" role="search">
					<input type="search" class="form-control" name="q"  placeholder={% translate "Search" %} aria-label="Search">
				</form>

				<div class="d-flex justify-content-start">
					<ul class="navbar-expand p-0 mb-0">
						<ul class="navbar-nav">

							<li class="nav-item m-1 me-3">
								<a href="{% url 'settings' %}" role="button">
									<i class="bi bi-gear-wide" style="font-size: 20px;color: grey;"></i>
								</a>
							</li>

							<li class="nav-item dropdown m-1">
								<a href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
									<i class="bi bi-person-circle" style="font-size: 20px;color: grey;"></i>
								</a>
								<ul class="dropdown-menu dropdown-menu-lg-end dropdown-menu-start text-small shadow">

									<li><a class="dropdown-item" href="{% url 'accounts' user_id %}">{% translate "Account details" %}</a></li>
									<li><hr class="dropdown-divider"></li>
									<li><a class="dropdown-item" href="{% url 'logout' %}">{% translate "Sign out" %}</a></li>
								</ul>
							</li>

						</ul>
					</ul>
				</div>
			</div>
		</nav>
	{% endblock navbar %}

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
		
		{% block sidebar %}{% endblock %}

		{% block main %}

			{% block breadcrumb %}
				{% include 'breadcrumb.html' %}
			{% endblock breadcrumb %}

		{% endblock main %}
	</body>
</html>
