function getCookie(e){let t=null;if(document.cookie&&""!==document.cookie){const r=document.cookie.split(";");for(let n=0;n<r.length;n++){const o=r[n].trim();if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}}return t}const csrftoken=getCookie("csrftoken"),draggables=document.querySelectorAll(".card.mb-2"),containers=document.querySelectorAll(".card-body.droppable");var source,target,url;draggables.forEach((e=>{e.addEventListener("dragstart",(()=>{e.classList.add("dragging"),url=e.getAttribute("data"),source=e.parentElement.id}))})),containers.forEach((e=>{e.addEventListener("dragover",(e=>{e.preventDefault()})),e.addEventListener("drop",(t=>{t.preventDefault();const r=document.querySelector(".dragging");e.appendChild(r),r.classList.remove("dragging");var n=r.id.split("card")[1];target=r.parentElement.id,source!=target?response=fetch(url,{method:"PUT",credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRFToken":csrftoken},body:JSON.stringify({target:target,issue_id:n})}).then((e=>(e.ok||console.log("HTTP request unsuccessful"),e.json()))).then((e=>{const t=document.getElementById("status"+e.id),r=document.getElementById("updated"+e.id),n=new Date(e.updated_time).toLocaleString();t.innerHTML=e.status+" "+e.source,r.innerHTML=e.updated+" "+n})):console.log("Error")}))}));